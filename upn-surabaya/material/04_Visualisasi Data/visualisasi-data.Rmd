---
title: Visualisasi data menggunakan R
subtitle: (A Subtitle Would Go Here if This Were a Class)
author: Ujang Fahmi
institute: 'Pelajaran ke-4'
titlegraphic: styles/sadasa.png
fontsize: 10pt
output:
 beamer_presentation:
   template: styles/svm-latex-beamer.tex
   keep_tex: true
   latex_engine: xelatex # pdflatex also works here
   dev: cairo_pdf # I typically comment this out  if latex_engine: pdflatex
   slide_level: 3
make149: true
mainfont: "Open Sans" # Try out some font options if xelatex
titlefont: "Titillium Web" # Try out some font options if xelatex
---

```{r setup, include=FALSE, cache=F, message=F, warning=F, results="hide"}
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(fig.path='figs/')
knitr::opts_chunk$set(cache.path='cache/')

knitr::opts_chunk$set(
                  fig.process = function(x) {
                      x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
                      if (file.rename(x, x2)) x2 else x
                      }
                  )
library(tidyverse)
library(stevemisc)
```

Salam kenal dan selamat datang.

Semoga kita semua bisa saling berbagi pengalaman dan pengetahuan. Saya adalah Ujang Fahmi, Co-founder dan mentor Sadasa Academy.

\vspace{0.1in}

Jika anda berada dan sedang membaca tutorial ini, maka kemungkinan anda adalah orang yang sedang ingin belajar data sains, atau mungkin ditugaskan untuk mempelajari R oleh institusi atau organisasi anda. Sama seperti saya dulu, dimana tanpa latar belakang enginering saya didiharuskan untuk belajar R, demi menyelesaikan tugas akhir dan akhirnya jadilah seperti saya sekarang ini.

\vspace{0.1in}

Satu hal yang pasti, ini adalah langkah pertama dari banyak langkah yang harus dilalui, entah melalui lembaga resmi atau belajar secara mandiri. Jadi selamat belajar!!!

\vspace{0.1in}
Ujang Fahmi, 

`r paste("Yogyakarta,", Sys.Date())`

\vspace{0.1in}

*Materi yang disampaikan disimpan dan dokumentasikan* [**disini**](https://github.com/eppofahmi/belajaR/tree/master/upn-surabaya)

# Menggunakan `ggplot`

## Apa `gg` dalam `ggplot`?

## Menyiapkan data

## Menentukan sumu x, y dan z

## Memilih jenis plot 

## Menyimpan plot 

## Memperbaiki tampilan plot
### Memilih tema
### Menukar posisi x dan y
### Mengatur warna kustom
### Menambahkan teks

# Jenis Plot

![Jenis polot yang umum digunakan](images/data-chart-type.png)

## Plot Distribusi

> Plot distribusi biasanya dibuat menggunakan baris/line untuk menunjukkan perubahan nilai dalam sebuah rentang data.

### Line Plot

::: {.columns}
::: {.column width="50%"}

```{r, eval=FALSE}
library(tidyverse)

df1 = sample_n(economics_long, 100)
df1 %>% 
   ggplot(aes(x = date, 
              y = value, 
              color = variable)) + 
   geom_line()
```

:::
::: {.column width="50%"}

Contoh plot line:

```{r, eval=TRUE, echo=FALSE}
library(tidyverse)

df1 = sample_n(economics_long, 100)
df1 %>% 
   select(date, value, variable) %>% 
   ggplot(aes(x = date, y = value, color = variable)) + 
   geom_line()
```

:::
:::

### Box-plot

::: {.columns}
::: {.column width="50%"}

```{r, eval=FALSE}
mtcars %>% 
   ggplot(aes(x=as.factor(cyl), 
              y=mpg)) + 
    geom_boxplot(fill="slateblue", 
                 alpha=0.2) + 
    xlab("cyl")
```

:::
::: {.column width="50%"}

Contoh boxplot:

```{r, eval=TRUE, echo=FALSE}
mtcars %>% 
   ggplot(aes(x=as.factor(cyl), 
              y=mpg)) + 
    geom_boxplot(fill="slateblue", 
                 alpha=0.2) + 
    xlab("cyl")
```

:::
:::

### Histogram 

::: {.columns}
::: {.column width="50%"}

```{r, eval=FALSE}
library(hrbrthemes)

data <- mtcars

data %>%
  ggplot(aes(x=mpg)) +
    geom_histogram(binwidth=5, 
                   fill="#69b3a2", 
                   color="#e9ecef", 
                   alpha=0.9) +
    ggtitle("Bin size = 5")
```

:::
::: {.column width="50%"}

Contoh histogram:

```{r, eval=TRUE, echo=FALSE}
library(hrbrthemes)

data <- mtcars

data %>%
  ggplot(aes(x=mpg)) +
    geom_histogram(binwidth=5, 
                   fill="#69b3a2", 
                   color="#e9ecef", 
                   alpha=0.9) +
    ggtitle("Bin size = 5")
```

:::
:::

## Plot Perbandingan

### Bar

::: {.columns}
::: {.column width="50%"}

```{r, eval=FALSE}
df <- data.frame(
   dose=c("D0.5", "D1", "D2"),
   len=c(4.2, 10, 29.5))

df %>% 
   ggplot(aes(x=dose, y=len)) +
   geom_bar(stat="identity")
```

:::
::: {.column width="50%"}

Contoh bar:

```{r, eval=TRUE, echo=FALSE}
df <- data.frame(dose=c("D0.5", "D1", "D2"),
                len=c(4.2, 10, 29.5))

df %>% 
   ggplot(aes(x=dose, y=len)) +
   geom_bar(stat="identity")
```

:::
:::

### Column

::: {.columns}
::: {.column width="50%"}

```{r, eval=FALSE}
df2 <- data.frame(
   supp=rep(c("VC", "OJ"), each=3),
   dose=rep(c("D0.5", "D1", "D2"),2),
   len=c(6.8, 15, 33, 4.2, 10, 29.5))

df2 %>% 
   ggplot(aes(x=dose, 
              y=len, 
              fill=supp)) +
   geom_col(position=position_dodge())+
   geom_text(aes(label=len), 
            vjust=1.6, 
            color="white",
            position = position_dodge(0.9),
            size=3.5)+
   scale_fill_brewer(palette="Paired")+
   theme_minimal()
```

:::
::: {.column width="50%"}

Contoh column:

```{r, eval=TRUE, echo=FALSE}
df2 <- data.frame(
   supp=rep(c("VC", "OJ"), each=3),
   dose=rep(c("D0.5", "D1", "D2"),2),
   len=c(6.8, 15, 33, 4.2, 10, 29.5))

df2 %>% 
   ggplot(aes(x=dose, 
              y=len, 
              fill=supp)) +
   geom_col(position=position_dodge())+
   geom_text(aes(label=len), 
            vjust=1.6, 
            color="white",
            position = position_dodge(0.9),
            size=3.5)+
   scale_fill_brewer(palette="Paired")+
   theme_minimal()
```

:::
:::

## Plot Hubungan

::: {.columns}
::: {.column width="50%"}

```{r, eval=FALSE}
mtcars %>% 
   ggplot(aes(x = mpg, 
              y = drat)) +
   geom_point(
      aes(
         color = 
            factor(gear)
         )
      )
```

:::
::: {.column width="50%"}

Contoh plot hubungan:

```{r, eval=TRUE, echo=FALSE}
mtcars %>% 
   ggplot(aes(x = mpg, 
              y = drat)) +
   geom_point(
      aes(
         color = 
            factor(gear)
         )
      )
```

:::
:::

## Plot Komposisi

### Pie chart dasar

::: {.columns}
::: {.column width="50%"}

```{r, eval=FALSE}
data <- data.frame(
  group=LETTERS[1:5],
  value=c(13,7,9,21,2)
)

# Basic piechart
data %>% 
   ggplot(aes(x="",
              y=value,
              fill=group)) +
   geom_bar(stat="identity", 
            width=1) +
   coord_polar("y", start=0)
```

:::
::: {.column width="50%"}

Contoh pie plot 1:

```{r, eval=TRUE, echo=FALSE}
data <- data.frame(
  group=LETTERS[1:5],
  value=c(13,7,9,21,2)
)

# Basic piechart
data %>% 
   ggplot(aes(x="",
              y=value,
              fill=group)) +
   geom_bar(stat="identity", 
            width=1) +
   coord_polar("y", start=0)
```

:::
:::

### Memperbaiki pie chart 1

::: {.columns}
::: {.column width="50%"}

```{r, eval=FALSE}
data %>% 
   ggplot(aes(x="", 
              y=value, 
              fill=group)) +
   geom_bar(stat="identity", 
            width=1, 
            color="white") +
   coord_polar("y", start=0) +
   theme_void()
```

:::
::: {.column width="50%"}

Contoh pie chart 2:

```{r, eval=TRUE, echo=FALSE}
data %>% 
   ggplot(aes(x="", 
              y=value, 
              fill=group)) +
   geom_bar(stat="identity", 
            width=1, 
            color="white") +
   coord_polar("y", start=0) +
   theme_void()
```

:::
:::


### Memperbaiki pie chart 2

```{r, eval=TRUE, echo=FALSE}
# Create Data
data <- data.frame(
  group=LETTERS[1:5],
  value=c(13,7,9,21,2)
)

# Compute the position of labels
data <- data %>% 
  arrange(desc(group)) %>%
  mutate(prop = value / sum(data$value) *100) %>%
  mutate(ypos = cumsum(prop)- 0.5*prop )

# Basic piechart
ggplot(data, aes(x="", y=prop, fill=group)) +
  geom_bar(stat="identity", width=1, color="white") +
  coord_polar("y", start=0) +
  theme_void() + 
  theme(legend.position="none") +
  geom_text(aes(y = ypos, label = group), color = "white", size=6) +
  scale_fill_brewer(palette="Set1")
```


# Your Turn
1. Membuat plot perbandingan
2. Membuat plot komposisi
3. Membuat plot hubungan
4. Membuat plot distribusi