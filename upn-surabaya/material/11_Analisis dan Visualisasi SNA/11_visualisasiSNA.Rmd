---
title: Visualisasi SNA
subtitle: (Pelatihan data sains menggunakan R dan Gephi)
author: Ujang Fahmi
institute: "Pelajaran ke-12"
titlegraphic: styles/sadasa.png
fontsize: 10pt
output:
 beamer_presentation:
   template: styles/svm-latex-beamer.tex
   keep_tex: true
   latex_engine: xelatex # pdflatex also works here
   dev: cairo_pdf # I typically comment this out  if latex_engine: pdflatex
   slide_level: 3
make149: true
mainfont: "Open Sans" # Try out some font options if xelatex
titlefont: "Titillium Web" # Try out some font options if xelatex
---

```{r setup, include=FALSE, cache=F, message=F, warning=F, results="hide", eval=FALSE}
knitr::opts_chunk$set(cache=TRUE)
knitr::opts_chunk$set(fig.path='figs/')
knitr::opts_chunk$set(cache.path='cache/')

knitr::opts_chunk$set(
   fig.process = function(x) {
      x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
      if (file.rename(x, x2)) x2 else x
   }
)
library(tidyverse)
library(stevemisc)
```

Salam kenal dan selamat datang.

Semoga kita semua bisa saling berbagi pengalaman dan pengetahuan. Saya adalah Ujang Fahmi, Co-founder dan mentor Sadasa Academy.

\vspace{0.1in}

Jika anda berada dan sedang membaca tutorial ini, maka kemungkinan anda adalah orang yang sedang ingin belajar data sains, atau mungkin ditugaskan untuk mempelajari R oleh institusi atau organisasi anda. Sama seperti saya dulu, dimana tanpa latar belakang enginering saya didiharuskan untuk belajar R, demi menyelesaikan tugas akhir dan akhirnya jadilah seperti saya sekarang ini.

\vspace{0.1in}

Satu hal yang pasti, ini adalah langkah pertama dari banyak langkah yang harus dilalui, entah melalui lembaga resmi atau belajar secara mandiri. Jadi selamat belajar!!!

\vspace{0.1in}
Ujang Fahmi, 

`r paste("Yogyakarta,", Sys.Date())`

\vspace{0.1in}

*Materi yang disampaikan disimpan dan dokumentasikan* [**disini**](https://github.com/eppofahmi/belajaR/tree/master/upn-surabaya)


# Visualisasi

Materi berikut merupakan materi visualisasi network di R. Terdapat beberapa package yang akan digunakan untuk membuat visualisasi di sini. Selain itu, kita juga akan menghitung centrality dan modularity network di R secara langsung. Sehingga secara keseluruhan kita tidak perlu lagi pindah ke perangkat lain. 

# Persiapan

Materi sebelumnya sudah membahas tentang pre-processing untuk mempersiapkan data network (materi 10) serta mengukur centrality dan modularity (materi 9) dengan package `igraph`. Untuk di sini kita akan mencoba untuk: 

1. Menggunakan data network yang sudah dibuat sebelumnya
2. Menambahkan centrality pada network
3. Menambahkan modularity pada network 
4. Membuat visualisasi network

## Data Network

Untuk dapat menggunakan data network yang sudah dibuat sebelumnya, kita bisa mengimpornya terelebih dahulu menggunakan skrip berikut: 

```{r, eval=FALSE}
library(igraph)

data_net = read_graph(file = "data/tes_net.graphml", format = "graphml")
class(data_net)
gsize(data_net)

# tes 1
plot(data_net, edge.arrow.size = 0.2)
```

## Menambahan centrality dan modularity

Sebelum mengukur centrality dan modularity, untuk mempermudah proses visualisasi kita perlu mengekstrak nodes dan edges dari data network terlebeih dahulu. 

```{r, eval=FALSE}
# extract nodes
nodes = data_frame(id = V(data_net)$id, nodes = V(data_net)$name)
glimpse(nodes)

# extract edges
edges = ends(data_net, E(data_net))
edges = as.data.frame(edges)
glimpse(edges)
```

### Degree Centrality

```{r, eval=FALSE}
degree.cent <- centr_degree(data_net, mode = "all")
# setNames(degree.cent$res, V(data_net)$name)

degree.cent = data_frame(degree.cent = degree.cent$res)
degree.cent %>% 
   head(10)

hasil = bind_cols(nodes, degree.cent)
glimpse(hasil)
```

### Betweeness Centrality

```{r, eval=FALSE}
betweenness.cent = 
   betweenness(data_net)
betweenness.cent = 
   data_frame(betweenness_cent = betweenness.cent)
betweenness.cent$betweenness_cent = 
   round(betweenness.cent$betweenness_cent, 2)
hasil = bind_cols(hasil, betweenness.cent)
```

### Eigenvector Centrality

```{r, eval=FALSE}
eigen_centrality = 
   eigen_centrality(data_net)
eigen_centrality = 
   data_frame(eigen_centrality = eigen_centrality[["vector"]])
eigen_centrality$eigen_centrality = 
   round(eigen_centrality$eigen_centrality, 2)
hasil = bind_cols(hasil, eigen_centrality)
```

### Modularity Centrality

```{r, eval=FALSE}
wtc <- cluster_walktrap(data_net)
modularity(wtc)
modularity(data_net, membership(wtc))

member = data_frame(modularity_class = wtc$membership)
hasil = bind_cols(hasil, member)
```

## Tampilan yang diperlukan

# Analisis dan Interpretasi